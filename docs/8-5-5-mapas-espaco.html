<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#E8488B"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-04-08T22:13:16.093081689"><title>8.5.5 Mapas de Espa&ccedil;o | Operating System</title><script type="application/json" id="virtual-toc-data">[{"id":"conceito-b-sico","level":0,"title":"Conceito Básico","anchor":"#conceito-b-sico"},{"id":"componentes-principais","level":0,"title":"Componentes Principais","anchor":"#componentes-principais"},{"id":"funcionamento","level":0,"title":"Funcionamento","anchor":"#funcionamento"},{"id":"vantagens","level":0,"title":"Vantagens","anchor":"#vantagens"},{"id":"considera-es-de-implementa-o","level":0,"title":"Considerações de Implementação","anchor":"#considera-es-de-implementa-o"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="images/logo-primary.svg"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="8.5.5 Mapas de Espa&ccedil;o | Operating System"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Operating System Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/8-5-5-mapas-espaco.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="8.5.5 Mapas de Espa&ccedil;o | Operating System"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/8-5-5-mapas-espaco.html#webpage",
    "url": "writerside-documentation/8-5-5-mapas-espaco.html",
    "name": "8.5.5 Mapas de Espa&ccedil;o | Operating System",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Operating System Help"
}</script><!-- End Schema.org --></head><body data-id="8-5-5-mapas-espaco" data-main-title="8.5.5 Mapas de Espaço" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Files System///8-5-gerenciamento-espaco-livre.md|8.5 Gerenciamento do Espaço Livre"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Operating System  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="8-5-5-mapas-espaco" id="8-5-5-mapas-espaco.md">8.5.5 Mapas de Espaço</h1><section class="chapter"><h2 id="conceito-b-sico" data-toc="conceito-b-sico">Conceito B&aacute;sico</h2><p id="z48oxef_8">O ZFS (Zettabyte File System) implementa uma abordagem sofisticada para gerenciamento de espa&ccedil;o livre, combinando v&aacute;rias t&eacute;cnicas para otimizar o desempenho em grandes escalas.</p></section><section class="chapter"><h2 id="componentes-principais" data-toc="componentes-principais">Componentes Principais</h2><section class="chapter"><h3 id="1-metaslabs" data-toc="1-metaslabs">1. Metaslabs</h3><ul class="list _bullet" id="z48oxef_11"><li class="list__item" id="z48oxef_12"><p id="z48oxef_15">Divis&otilde;es do espa&ccedil;o em disco em unidades gerenci&aacute;veis</p></li><li class="list__item" id="z48oxef_13"><p id="z48oxef_16">Cada volume pode conter centenas de metaslabs</p></li><li class="list__item" id="z48oxef_14"><p id="z48oxef_17">Cada metaslab possui seu pr&oacute;prio mapa de espa&ccedil;o</p></li></ul></section><section class="chapter"><h3 id="2-mapas-de-espa-o" data-toc="2-mapas-de-espa-o">2. Mapas de Espa&ccedil;o</h3><ul class="list _bullet" id="z48oxef_18"><li class="list__item" id="z48oxef_20"><p id="z48oxef_24">Implementados como logs de atividade de blocos</p></li><li class="list__item" id="z48oxef_21"><p id="z48oxef_25">Registram opera&ccedil;&otilde;es de aloca&ccedil;&atilde;o e libera&ccedil;&atilde;o</p></li><li class="list__item" id="z48oxef_22"><p id="z48oxef_26">Utilizam formato de contagem</p></li><li class="list__item" id="z48oxef_23"><p id="z48oxef_27">Armazenados em estrutura orientada a log</p></li></ul><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 692.140625 382"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="692.140625" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B1_0" d="M271.93,50.928L243.945,56.94C215.961,62.952,159.992,74.976,132.008,83.071C104.023,91.167,104.023,95.333,104.023,98.833C104.023,102.333,104.023,105.167,104.023,106.583L104.023,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B2_1" d="M346.07,62L346.07,66.167C346.07,70.333,346.07,78.667,346.07,84.917C346.07,91.167,346.07,95.333,346.07,98.833C346.07,102.333,346.07,105.167,346.07,106.583L346.07,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B3_2" d="M420.211,50.928L448.195,56.94C476.18,62.952,532.148,74.976,560.133,83.071C588.117,91.167,588.117,95.333,588.117,98.833C588.117,102.333,588.117,105.167,588.117,106.583L588.117,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B1_C1_3" d="M104.023,166L104.023,170.167C104.023,174.333,104.023,182.667,104.023,188.917C104.023,195.167,104.023,199.333,104.023,202.833C104.023,206.333,104.023,209.167,104.023,210.583L104.023,212"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B2_C2_4" d="M346.07,166L346.07,170.167C346.07,174.333,346.07,182.667,346.07,188.917C346.07,195.167,346.07,199.333,346.07,202.833C346.07,206.333,346.07,209.167,346.07,210.583L346.07,212"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B3_C3_5" d="M588.117,166L588.117,170.167C588.117,174.333,588.117,182.667,588.117,188.917C588.117,195.167,588.117,199.333,588.117,202.833C588.117,206.333,588.117,209.167,588.117,210.583L588.117,212"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C1_D1_6" d="M104.023,270L104.023,274.167C104.023,278.333,104.023,286.667,104.023,292.917C104.023,299.167,104.023,303.333,104.023,306.833C104.023,310.333,104.023,313.167,104.023,314.583L104.023,316"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C2_D2_7" d="M346.07,270L346.07,274.167C346.07,278.333,346.07,286.667,346.07,292.917C346.07,299.167,346.07,303.333,346.07,306.833C346.07,310.333,346.07,313.167,346.07,314.583L346.07,316"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C3_D3_8" d="M588.117,270L588.117,274.167C588.117,278.333,588.117,286.667,588.117,292.917C588.117,299.167,588.117,303.333,588.117,306.833C588.117,310.333,588.117,313.167,588.117,314.583L588.117,316"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(346.0703125, 35)" id="flowchart-A-16663" class="node default"><rect height="54" width="148.28125" y="-27" x="-74.140625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-44.140625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="88.28125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Volume ZFS</p></span></div></foreignObject></g></g><g transform="translate(104.0234375, 139)" id="flowchart-B1-16664" class="node default"><rect height="54" width="138.515625" y="-27" x="-69.2578125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-39.2578125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="78.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Metaslab 1</p></span></div></foreignObject></g></g><g transform="translate(346.0703125, 139)" id="flowchart-B2-16666" class="node default"><rect height="54" width="138.515625" y="-27" x="-69.2578125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-39.2578125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="78.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Metaslab 2</p></span></div></foreignObject></g></g><g transform="translate(588.1171875, 139)" id="flowchart-B3-16668" class="node default"><rect height="54" width="138.515625" y="-27" x="-69.2578125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-39.2578125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="78.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Metaslab n</p></span></div></foreignObject></g></g><g transform="translate(104.0234375, 243)" id="flowchart-C1-16670" class="node default"><rect height="54" width="180.421875" y="-27" x="-90.2109375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-60.2109375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="120.421875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Mapa de Espaço</p></span></div></foreignObject></g></g><g transform="translate(346.0703125, 243)" id="flowchart-C2-16672" class="node default"><rect height="54" width="180.421875" y="-27" x="-90.2109375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-60.2109375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="120.421875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Mapa de Espaço</p></span></div></foreignObject></g></g><g transform="translate(588.1171875, 243)" id="flowchart-C3-16674" class="node default"><rect height="54" width="180.421875" y="-27" x="-90.2109375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-60.2109375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="120.421875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Mapa de Espaço</p></span></div></foreignObject></g></g><g transform="translate(104.0234375, 347)" id="flowchart-D1-16676" class="node default"><rect height="54" width="192.046875" y="-27" x="-96.0234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-66.0234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="132.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Log de Operações</p></span></div></foreignObject></g></g><g transform="translate(346.0703125, 347)" id="flowchart-D2-16678" class="node default"><rect height="54" width="192.046875" y="-27" x="-96.0234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-66.0234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="132.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Log de Operações</p></span></div></foreignObject></g></g><g transform="translate(588.1171875, 347)" id="flowchart-D3-16680" class="node default"><rect height="54" width="192.046875" y="-27" x="-96.0234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-66.0234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="132.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Log de Operações</p></span></div></foreignObject></g></g></g></g></g></svg></section></section><section class="chapter"><h2 id="funcionamento" data-toc="funcionamento">Funcionamento</h2><section class="chapter"><h3 id="processo-de-aloca-o-libera-o" data-toc="processo-de-aloca-o-libera-o">Processo de Aloca&ccedil;&atilde;o/Libera&ccedil;&atilde;o</h3><ol class="list _decimal" id="z48oxef_29" type="1"><li class="list__item" id="z48oxef_31"><p id="z48oxef_36">Carregamento do mapa de espa&ccedil;o na mem&oacute;ria</p></li><li class="list__item" id="z48oxef_32"><p id="z48oxef_37">Convers&atilde;o para estrutura de &aacute;rvore balanceada</p></li><li class="list__item" id="z48oxef_33"><p id="z48oxef_38">Reprodu&ccedil;&atilde;o do log na estrutura</p></li><li class="list__item" id="z48oxef_34"><p id="z48oxef_39">Condensa&ccedil;&atilde;o de blocos cont&iacute;guos</p></li><li class="list__item" id="z48oxef_35"><p id="z48oxef_40">Atualiza&ccedil;&atilde;o transacional no disco</p></li></ol><div class="code-block" data-lang="java">
public class MetaSlab {
    private static class MapaEspaco {
        private TreeMap&lt;Long, Long&gt; arvoreBalanceada; // offset -&gt; tamanho
        private List&lt;Operacao&gt; log;
        
        public MapaEspaco() {
            this.arvoreBalanceada = new TreeMap&lt;&gt;();
            this.log = new ArrayList&lt;&gt;();
        }
        
        public void registrarOperacao(TipoOperacao tipo, long offset, long tamanho) {
            Operacao op = new Operacao(tipo, offset, tamanho);
            log.add(op);
            
            // Atualiza árvore balanceada em memória
            if (tipo == TipoOperacao.LIBERACAO) {
                adicionarEspacoLivre(offset, tamanho);
            } else {
                removerEspacoLivre(offset, tamanho);
            }
        }
        
        private void adicionarEspacoLivre(long offset, long tamanho) {
            // Tenta mesclar com blocos adjacentes
            Map.Entry&lt;Long, Long&gt; anterior = arvoreBalanceada.floorEntry(offset);
            Map.Entry&lt;Long, Long&gt; proximo = arvoreBalanceada.ceilingEntry(offset + tamanho);
            
            long novoOffset = offset;
            long novoTamanho = tamanho;
            
            if (anterior != null &amp;&amp; anterior.getKey() + anterior.getValue() == offset) {
                novoOffset = anterior.getKey();
                novoTamanho += anterior.getValue();
                arvoreBalanceada.remove(anterior.getKey());
            }
            
            if (proximo != null &amp;&amp; offset + tamanho == proximo.getKey()) {
                novoTamanho += proximo.getValue();
                arvoreBalanceada.remove(proximo.getKey());
            }
            
            arvoreBalanceada.put(novoOffset, novoTamanho);
        }
        
        private void removerEspacoLivre(long offset, long tamanho) {
            // Implementação da remoção de espaço livre
            Map.Entry&lt;Long, Long&gt; bloco = arvoreBalanceada.floorEntry(offset);
            if (bloco != null) {
                long blocoOffset = bloco.getKey();
                long blocoTamanho = bloco.getValue();
                
                arvoreBalanceada.remove(blocoOffset);
                
                // Adiciona blocos remanescentes, se houver
                if (blocoOffset &lt; offset) {
                    arvoreBalanceada.put(blocoOffset, offset - blocoOffset);
                }
                if (offset + tamanho &lt; blocoOffset + blocoTamanho) {
                    arvoreBalanceada.put(offset + tamanho, 
                        (blocoOffset + blocoTamanho) - (offset + tamanho));
                }
            }
        }
    }
    
    private static class Operacao {
        TipoOperacao tipo;
        long offset;
        long tamanho;
        
        Operacao(TipoOperacao tipo, long offset, long tamanho) {
            this.tipo = tipo;
            this.offset = offset;
            this.tamanho = tamanho;
        }
    }
    
    private enum TipoOperacao {
        ALOCACAO,
        LIBERACAO
    }
}
</div></section></section><section class="chapter"><h2 id="vantagens" data-toc="vantagens">Vantagens</h2><ol class="list _decimal" id="z48oxef_41" type="1"><li class="list__item" id="z48oxef_42"><p id="z48oxef_46"><span class="control" id="z48oxef_48">Efici&ecirc;ncia em Grande Escala</span></p><ul class="list _bullet" id="z48oxef_47"><li class="list__item" id="z48oxef_49"><p id="z48oxef_51">Gerencia eficientemente grandes volumes de dados</p></li><li class="list__item" id="z48oxef_50"><p id="z48oxef_52">Minimiza E/S de metadados</p></li></ul></li><li class="list__item" id="z48oxef_43"><p id="z48oxef_53"><span class="control" id="z48oxef_55">Consist&ecirc;ncia</span></p><ul class="list _bullet" id="z48oxef_54"><li class="list__item" id="z48oxef_56"><p id="z48oxef_58">Opera&ccedil;&otilde;es transacionais garantem integridade</p></li><li class="list__item" id="z48oxef_57"><p id="z48oxef_59">Log mant&eacute;m hist&oacute;rico de opera&ccedil;&otilde;es</p></li></ul></li><li class="list__item" id="z48oxef_44"><p id="z48oxef_60"><span class="control" id="z48oxef_62">Otimiza&ccedil;&atilde;o de Desempenho</span></p><ul class="list _bullet" id="z48oxef_61"><li class="list__item" id="z48oxef_63"><p id="z48oxef_65">Estrutura em &aacute;rvore balanceada para opera&ccedil;&otilde;es r&aacute;pidas</p></li><li class="list__item" id="z48oxef_64"><p id="z48oxef_66">Condensa&ccedil;&atilde;o autom&aacute;tica de blocos cont&iacute;guos</p></li></ul></li><li class="list__item" id="z48oxef_45"><p id="z48oxef_67"><span class="control" id="z48oxef_69">Escalabilidade</span></p><ul class="list _bullet" id="z48oxef_68"><li class="list__item" id="z48oxef_70"><p id="z48oxef_72">Divis&atilde;o em metaslabs facilita gerenciamento</p></li><li class="list__item" id="z48oxef_71"><p id="z48oxef_73">Estrutura hier&aacute;rquica eficiente</p></li></ul></li></ol></section><section class="chapter"><h2 id="considera-es-de-implementa-o" data-toc="considera-es-de-implementa-o">Considera&ccedil;&otilde;es de Implementa&ccedil;&atilde;o</h2><ol class="list _decimal" id="z48oxef_74" type="1"><li class="list__item" id="z48oxef_75"><p id="z48oxef_78"><span class="control" id="z48oxef_80">Gest&atilde;o de Mem&oacute;ria</span></p><ul class="list _bullet" id="z48oxef_79"><li class="list__item" id="z48oxef_81"><p id="z48oxef_83">Carregamento seletivo de metaslabs</p></li><li class="list__item" id="z48oxef_82"><p id="z48oxef_84">Cache eficiente de mapas ativos</p></li></ul></li><li class="list__item" id="z48oxef_76"><p id="z48oxef_85"><span class="control" id="z48oxef_87">Consist&ecirc;ncia de Dados</span></p><ul class="list _bullet" id="z48oxef_86"><li class="list__item" id="z48oxef_88"><p id="z48oxef_90">Logging transacional</p></li><li class="list__item" id="z48oxef_89"><p id="z48oxef_91">Recupera&ccedil;&atilde;o ap&oacute;s falhas</p></li></ul></li><li class="list__item" id="z48oxef_77"><p id="z48oxef_92"><span class="control" id="z48oxef_94">Otimiza&ccedil;&atilde;o de E/S</span></p><ul class="list _bullet" id="z48oxef_93"><li class="list__item" id="z48oxef_95"><p id="z48oxef_97">Minimiza&ccedil;&atilde;o de escritas de metadados</p></li><li class="list__item" id="z48oxef_96"><p id="z48oxef_98">Agrupamento de opera&ccedil;&otilde;es relacionadas</p></li></ul></li></ol></section><div class="last-modified">08 abril 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="8-5-3-agrupamento.html" class="navigation-links__prev">8.5.3 Agrupamento</a><a href="8-5-4-contagem.html" class="navigation-links__next">8.5.4 Contagem</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>